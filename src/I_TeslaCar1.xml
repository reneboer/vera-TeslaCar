<?xml version="1.0"?>
<!-- 
	Vera/openLuup "TeslaCar" Plug-in 
	
	Written by Rene Boer
	
	V1.0 10 November 2019
	
-->
<implementation>
	<settings>
		<protocol>crlf</protocol>
	</settings>
	<files>L_TeslaCar1.lua</files>  
	<startup>TeslaCarModule_Initialize</startup>
	<actionList>
		<action>
			<name>flashLights</name>
			<serviceId>urn:rboer-com:serviceId:TeslaCar1</serviceId>
			<job>
				CarModule.StartAction('flashLights')
				return 4, nil
			</job>
		</action>
		<action>
			<name>honkHorn</name>
			<serviceId>urn:rboer-com:serviceId:TeslaCar1</serviceId>
			<job>
				CarModule.StartAction('honkHorn')
				return 4, nil
			</job>
		</action>
		<action>
			<name>lockDoors</name>
			<serviceId>urn:rboer-com:serviceId:TeslaCar1</serviceId>
			<job>
				CarModule.StartAction('lockDoors')
				return 4, nil
			</job>
		</action>
		<action>
			<name>unlockDoors</name>
			<serviceId>urn:rboer-com:serviceId:TeslaCar1</serviceId>
			<job>
				CarModule.StartAction('unlockDoors')
				return 4, nil
			</job>
		</action>
		<action>
			<name>unlockFrunc</name>
			<serviceId>urn:rboer-com:serviceId:TeslaCar1</serviceId>
			<job>
				CarModule.StartAction('unlockFrunc')
				return 4, nil
			</job>
		</action>
		<action>
			<name>unlockTrunc</name>
			<serviceId>urn:rboer-com:serviceId:TeslaCar1</serviceId>
			<job>
				CarModule.StartAction('unlockTrunc')
				return 4, nil
			</job>
		</action>
		<action>
			<name>openChargePort</name>
			<serviceId>urn:rboer-com:serviceId:TeslaCar1</serviceId>
			<job>
				CarModule.StartAction('openChargePort')
				return 4, nil
			</job>
		</action>
		<action>
			<name>closeChargePort</name>
			<serviceId>urn:rboer-com:serviceId:TeslaCar1</serviceId>
			<job>
				CarModule.StartAction('closeChargePort')
				return 4, nil
			</job>
		</action>
		<action>
			<name>startCharge</name>
			<serviceId>urn:rboer-com:serviceId:TeslaCar1</serviceId>
			<job>
				var.Set("ChargeStatus", 1)
				CarModule.StartAction('startCharge')
				return 4, nil
			</job>
		</action>
		<action>
			<name>stopCharge</name>
			<serviceId>urn:rboer-com:serviceId:TeslaCar1</serviceId>
			<job>
				var.Set("ChargeStatus", 0)
				CarModule.StartAction('stopCharge')
				return 4, nil
			</job>
		</action>
		<action>
			<name>setChargeLimit</name>
			<serviceId>urn:rboer-com:serviceId:TeslaCar1</serviceId>
			<job>
				CarModule.StartAction('setChargeLimit', lul_settings.newTargetValue or 90)
				return 4, nil
			</job>
		</action>
		<action>
			<name>setStandardChargeLimit</name>
			<serviceId>urn:rboer-com:serviceId:TeslaCar1</serviceId>
			<job>
				CarModule.StartAction('setStandardChargeLimit')
				return 4, nil
			</job>
		</action>
		<action>
			<name>setMaximumChargeLimit</name>
			<serviceId>urn:rboer-com:serviceId:TeslaCar1</serviceId>
			<job>
				CarModule.StartAction('setMaximumChargeLimit')
				return 4, nil
			</job>
		</action>
		<action>
			<name>startClimate</name>
			<serviceId>urn:rboer-com:serviceId:TeslaCar1</serviceId>
			<job>
				var.Set("ClimateStatus", 1)
				CarModule.StartAction('startClimate')
				return 4, nil
			</job>
		</action>
		<action>
			<name>stopClimate</name>
			<serviceId>urn:rboer-com:serviceId:TeslaCar1</serviceId>
			<job>
				var.Set("ClimateStatus", 0)
				CarModule.StartAction('stopClimate')
				return 4, nil
			</job>
		</action>
		<action>
			<name>setTemperature</name>
			<serviceId>urn:rboer-com:serviceId:TeslaCar1</serviceId>
			<job>
				CarModule.StartAction('setTemperature', lul_settings.newTargetValue or 20)
				return 4, nil
			</job>
		</action>
		<action>
			<name>updateSoftware</name>
			<serviceId>urn:rboer-com:serviceId:TeslaCar1</serviceId>
			<job>
				CarModule.StartAction('updateSoftware')
				return 4, nil
			</job>
		</action>
		<action>
			<name>SetAutoSoftwareInstall</name>
			<serviceId>urn:rboer-com:serviceId:TeslaCar1</serviceId>
			<run>
				var.Set("AutoSoftwareInstall",lul_settings.newTargetValue or 0)
			</run>
		</action>
		<action>
			<name>Reset</name>
			<serviceId>urn:rboer-com:serviceId:TeslaCar1</serviceId>
			<run>
				CarModule.Reset()
				return 4, nil
			</run>
		</action>
		<action>
			<name>Login</name>
			<serviceId>urn:rboer-com:serviceId:TeslaCar1</serviceId>
			<job>
				CarModule.Login()
				return 4, nil
			</job>
		</action>
		<action>
			<name>Poll</name>
			<serviceId>urn:rboer-com:serviceId:TeslaCar1</serviceId>
			<job>
				CarModule.Poll()
				return 4, nil
			</job>
		</action>
	</actionList>
</implementation>